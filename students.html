<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Student List</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>

<body class="p-4 bg-light">

<div class="container">

  <!-- Header -->
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2>ðŸ“‹ Student List</h2>
    <a href="dashboard.html" class="btn btn-secondary">Back</a>
  </div>

  <!-- Search + Count -->
  <div class="row mb-3">
    <div class="col-md-6">
      <input type="text" id="searchInput" class="form-control" placeholder="Search by name or ID">
    </div>
    <div class="col-md-6 text-end">
      <span class="badge bg-primary p-2">
        Total Students: <span id="studentCount">0</span>
      </span>
    </div>
  </div>

  <!-- Student Table -->
  <div class="card shadow-sm">
    <div class="card-body">
      <table class="table table-hover">
        <thead class="table-dark">
          <tr>
            <th>Name</th>
            <th>Student ID</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody id="studentTable">
          <!-- Firebase data -->
        </tbody>
      </table>
    </div>
  </div>

</div>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
  // Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyDpzuExZHIX9VR9ykKQB-6tpxnzRU3WxTQ",
    authDomain: "studentplanner-d0933.firebaseapp.com",
    projectId: "studentplanner-d0933",
    storageBucket: "studentplanner-d0933.firebasestorage.app",
    messagingSenderId: "734911455270",
    appId: "1:734911455270:web:a5f0381a14c6d3fb31c6e7"
  };

  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  const table = document.getElementById("studentTable");
  const countEl = document.getElementById("studentCount");
  const searchInput = document.getElementById("searchInput");

  let students = [];

  // Load students
  db.collection("students").get().then(snapshot => {
    students = snapshot.docs.map(doc => doc.data());
    countEl.textContent = students.length;
    renderTable(students);
  });

  // Render table
  function renderTable(data) {
    table.innerHTML = "";
    data.forEach(s => {
      const statusBadge =
        s.Status === "Active"
          ? `<span class="badge bg-success">Active</span>`
          : `<span class="badge bg-danger">Inactive</span>`;

      table.innerHTML += `
        <tr>
          <td>${s.Name}</td>
          <td>${s.StudentId}</td>
          <td>${statusBadge}</td>
        </tr>
      `;
    });
  }

  // Search filter
  searchInput.addEventListener("keyup", () => {
    const value = searchInput.value.toLowerCase();
    const filtered = students.filter(s =>
      s.Name.toLowerCase().includes(value) ||
      s.StudentId.toLowerCase().includes(value)
    );
    renderTable(filtered);
  });
</script>

</body>
</html>
