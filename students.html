<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyDpzuExZHIX9VR9ykKQB-6tpxnzRU3WxTQ",
  authDomain: "studentplanner-d0933.firebaseapp.com",
  projectId: "studentplanner-d0933",
  storageBucket: "studentplanner-d0933.firebasestorage.app",
  messagingSenderId: "734911455270",
  appId: "1:734911455270:web:a5f0381a14c6d3fb31c6e7",
  measurementId: "G-F8B40LEWVP"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const table = document.getElementById("studentTable");

// âœ… CORRECT WAY (no await issue)
getDocs(collection(db, "students"))
  .then((querySnapshot) => {
    querySnapshot.forEach((doc) => {
      const data = doc.data();
      table.innerHTML += `
        <tr>
          <td>${data.Name}</td>
          <td>${data.StudentID}</td>
          <td>${data.Status}</td>
        </tr>
      `;
    });
  })
  .catch((error) => {
    console.error(error);
    alert("Failed to load students");
  });
</script>
